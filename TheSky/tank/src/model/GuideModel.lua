--[[--
--引导 model
--Author: H.X.Sun
--Date: 2015-04-24
--]]

local GuideModel = qy.class("GuideModel", qy.tank.model.BaseModel)

local statGuideTime = 30

function GuideModel:initData(data)
	self.userModel = qy.tank.model.UserInfoModel
	self.throughSteps = {}
	self.lastSubmitTime = self.userModel.serverTime
	self.stat_guide = data.stat_guide
	local guideData = data.main.guide

	if guideData == nil or guideData.is_complete == 1 then
	-- if false then
		print("新手引导已完成！！！！！！")
		qy.isNoviceGuide = false
		self._step = 0
	else
		qy.isNoviceGuide = true
		print("新手上一次走到的步骤：" .. guideData.current_step_id)
		self._step = self:__getNextBigStepByConfig(guideData.current_step_id)
		if self._step == -1 then
			qy.isNoviceGuide = false
			qy.tank.service.GuideService:guideComplete()
		else
			self.firstStep = self._step
			self._subStep = 1
			print("开始新手引导——>>>>>")
			local configData = qy.Config.novice_guide
			self._arr = qy.tank.utils.Config2ArrUtil.getArrByGuideConfig(configData)
		end
	end

	self:__initTriggerGuideData()
end

--[[--
--从配置表里取下一大步
--]]
function GuideModel:__getNextBigStepByConfig(_curStep)
	print("配置表的当前步：" .. _curStep)
	local data = qy.Config.step_guide
	for _k, _v in pairs(data) do
		if data[_k].step_id == _curStep then
			print("配置表的下一步：【大步骤】" .. data[_k].next_step_id)
			return data[_k].next_step_id
		end
	end

	return -1
end

function GuideModel:getFirstStep()
	return self.firstStep
end

function GuideModel:getCurrentBigStep()
	return self._step
end

function GuideModel:getCurrentStep()
	return self._step, self._subStep
end

function GuideModel:setCurrentStep(_step, _subStep)
	self._step = _step
	self._subStep = _subStep
end

function GuideModel:getGuideDataArr()
	return self._arr
end

function GuideModel:getGuideImg(_roleRes)
	if _roleRes == "lead_2" then
		print("Resources/guide/role/img_" .. self.userModel.userInfoEntity.headicon_:get() .. ".png")
		return "Resources/guide/role/img_" .. self.userModel.userInfoEntity.headicon_:get() .. ".png"
	else
		print("Resources/guide/role/" .. _roleRes .. ".png")
		return "Resources/guide/role/" .. _roleRes .. ".png"
	end

end

function GuideModel:getCurrentStepKey()
	if self._arr[self._step] then
		if self._arr[self._step][self._subStep] then
			return self._arr[self._step][self._subStep].step_key
		end
	end

	return ""

end

--名
function GuideModel:getFirstName(_sex)
	if _sex == 1 then
		local num = math.random(912)
		print("math.random(912) ==" .. num)
		if num < 1 or num > 500 then
			return qy.Config.rand_name["1"].boy1
		else
			return qy.Config.rand_name["" .. num].boy1
		end
	else
		--女
		local num = math.random(254)
		if num < 1 or num > 254 then
			return qy.Config.rand_name["1"].girl1
		else
			return qy.Config.rand_name["" .. num].girl1
		end
	end
end

--姓
function GuideModel:getLastName(_sex)
	if _sex == 1 then
		--男
		local num = math.random(495)
		if num < 1 or num > 495 then
			return qy.Config.rand_name["1"].boy2
		else
			return qy.Config.rand_name["" .. num].boy2
		end
	else
		--女
		local num = math.random(496)
		if num < 1 or num > 496 then
			return qy.Config.rand_name["1"].girl2
		else
			return qy.Config.rand_name["" .. num].girl2
		end
	end
end

function GuideModel:getRandomName(_head)
	_sex = _head % 2 -- 0:女，1：男
	local name = self:getFirstName(_sex)  .. "·" ..  self:getLastName(_sex)
	print("name ======" .. name)
	if qy.tank.utils.String.getLengthWithStr(name) > self:getNickNameLength() then
		return self:getRandomName(_head)
	else
		return name
	end
end

function GuideModel:getNickNameLength()
	return 16
end

function GuideModel:getTankList()
	local data = qy.Config.step_guide
	local award = nil
	for _k, _v in pairs(data) do
		if data[_k].step_id == 3 then
			award = data[_k].award
			break
		end
	end
	if award == nil then
		return nil
	else
		local tankList = {}
		local entity = nil
		for i = 1, #award do
			entity = qy.tank.entity.TankEntity.new(tonumber(award[i].id))
			table.insert(tankList, entity)
		end
		return tankList
	end
end

function GuideModel:submitGuideStep(_sec)
	local function submitFailureLogic()
		if self.hasSubmitStep then
			for _k, _v in pairs(self.hasSubmitStep) do
				if self.throughSteps and self.throughSteps[_k] then
					for i = 1, #self.hasSubmitStep[_k] do
						table.insert(self.throughSteps[_k], self.hasSubmitStep[_k][i])
					end
				end
			end
		end
	end

	if _G.next(self.throughSteps) ~= nil then
		qy.tank.service.GuideService:submitGuideStepSer(function (data)
			self.lastSubmitTime = _sec
			-- self:removeThroughSteps(data)
			-- self.throughSteps = {}
			self.hasSubmitStep = {}
		end,function ()
			submitFailureLogic()
		end,function ()
			submitFailureLogic()
		end)
	else
		self.lastSubmitTime = _sec
	end
end


function GuideModel:submitGuideStepLogic(_sec)
	if self.stat_guide == 1 and qy.isNoviceGuide then --||||||
		if _sec - self.lastSubmitTime >= statGuideTime then
			self:submitGuideStep(_sec)
		end
	end
end

function GuideModel:getThroughSteps()
	return self.throughSteps
end

function GuideModel:submitThStepsData()
	self.hasSubmitStep = self.throughSteps
	self.throughSteps = {}
	return self.hasSubmitStep
end

function GuideModel:setThroughSteps(_step, _subStep)
	if self.throughSteps[tostring(_step)] == nil then
		self.throughSteps[tostring(_step)] = {}
	end
	table.insert(self.throughSteps[tostring(_step)], _subStep)
end

function GuideModel:getFirstBattleData()
	--local data = [[{"fight_type":7,"ext":[],"start":{"left":{"tank":{"2":{"unique_id":2,"kid":10000,"tank_id":1,"name":"SU-14-1","type":4,"level":1,"exp":0,"star":5,"quality":2,"attack":2250,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":22000}},"user":{"nickname":"S\u5766\u514b\u56e2","level":1}},"right":{"tank":{"1":{"unique_id":1,"kid":10000,"tank_id":5,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":2,"level":30,"exp":0,"star":5,"quality":1,"attack":5625,"defense":1100,"blood":13827,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":13827},"2":{"unique_id":2,"kid":10000,"tank_id":6,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":6100,"defense":0,"blood":14000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":0,"max_blood":14000},"3":{"unique_id":3,"kid":10000,"tank_id":7,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":6458,"defense":0,"blood":12800,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":12800},"4":{"unique_id":4,"kid":10000,"tank_id":8,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":5625,"defense":690,"blood":12800,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":12800},"5":{"unique_id":5,"kid":10000,"tank_id":9,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":3,"level":30,"exp":0,"star":5,"quality":1,"attack":6100,"defense":1400,"blood":15000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":15000},"6":{"unique_id":6,"kid":10000,"tank_id":10,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":3,"level":30,"exp":0,"star":5,"quality":1,"attack":6458,"defense":1200,"blood":14500,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":14500}},"user":{"nickname":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","level":30}}},"fight":[{"pre":[],"battle":[{"attack":{"pos":2,"from":0,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":22000},"defense":[{"pos":2,"from":1,"skill_id":230,"hurt":2250,"blood":11750,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":1,"from":1,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":13827},"defense":[{"pos":2,"from":0,"skill_id":230,"hurt":5625,"blood":16375,"morale":2,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":2,"from":1,"skill_id":231,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":11750},"defense":[{"pos":1,"from":0,"skill_id":-1},{"pos":2,"from":0,"skill_id":231,"hurt":6100,"blood":10275,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":0,"skill_id":-1},{"pos":4,"from":0,"skill_id":-1},{"pos":5,"from":0,"skill_id":-1},{"pos":6,"from":0,"skill_id":-1}],"own":[]},{"attack":{"pos":3,"from":1,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":12800},"defense":[{"pos":2,"from":0,"skill_id":230,"hurt":6458,"blood":3817,"morale":2,"is_dodge":0,"type":0}],"own":[]}],"end":[]},{"pre":{"supply":{"4":{"unique_id":4,"kid":10000,"tank_id":2,"name":"T1\u91cd\u5766","type":3,"level":1,"exp":0,"star":5,"quality":3,"attack":8925,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":232,"compat_skill_id":232,"morale":4},"5":{"unique_id":5,"kid":10000,"tank_id":3,"name":"M7\u7267\u5e08","type":4,"level":1,"exp":0,"star":5,"quality":3,"attack":9100,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":233,"compat_skill_id":233,"morale":4},"6":{"unique_id":6,"kid":10000,"tank_id":4,"name":"\u516c\u7f8a","type":2,"level":1,"exp":0,"star":5,"quality":3,"attack":9600,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":4}}},"battle":[{"attack":{"pos":4,"from":0,"skill_id":232,"is_compat":0,"add_m":0,"morale":6,"is_crit":0,"hurt":0,"add":0,"blood":22000},"defense":[{"pos":1,"from":1,"skill_id":232,"hurt":7825,"blood":6002,"morale":2,"is_dodge":0,"type":0},{"pos":2,"from":1,"skill_id":232,"hurt":8925,"blood":2825,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":1,"skill_id":232,"hurt":8925,"blood":3875,"morale":2,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":5,"from":0,"skill_id":233,"is_compat":0,"add_m":0,"morale":6,"is_crit":0,"hurt":0,"add":0,"blood":22000},"defense":[{"pos":4,"from":1,"skill_id":233,"hurt":8410,"blood":4390,"morale":0,"is_dodge":0,"type":0},{"pos":5,"from":1,"skill_id":233,"hurt":7700,"blood":7300,"morale":0,"is_dodge":0,"type":0},{"pos":6,"from":1,"skill_id":233,"hurt":7900,"blood":6600,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":6,"from":0,"skill_id":231,"is_compat":0,"add_m":0,"morale":4,"is_crit":0,"hurt":0,"add":0,"blood":22000},"defense":[{"pos":1,"from":1,"skill_id":231,"hurt":6002,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":2,"from":1,"skill_id":231,"hurt":2825,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":1,"skill_id":231,"hurt":3875,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":4,"from":1,"skill_id":231,"hurt":4390,"blood":0,"morale":0,"is_dodge":0,"type":0},{"pos":5,"from":1,"skill_id":231,"hurt":7300,"blood":0,"morale":0,"is_dodge":0,"type":0},{"pos":6,"from":1,"skill_id":231,"hurt":6600,"blood":0,"morale":0,"is_dodge":0,"type":0}],"own":[]}],"end":[]}],"end":{"left":{"tank":{"2":{"unique_id":2,"kid":10000,"tank_id":1,"name":"SU-14-1","type":4,"level":1,"exp":0,"star":5,"quality":2,"attack":2250,"defense":0,"blood":3817,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":2,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":1,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":230,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":1,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":230,"type":3}},"max_blood":22000},"4":{"unique_id":4,"kid":10000,"tank_id":2,"name":"T1\u91cd\u5766","type":3,"level":1,"exp":0,"star":5,"quality":3,"attack":8925,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":232,"compat_skill_id":232,"morale":6,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":232,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":232,"type":3}},"max_blood":22000},"5":{"unique_id":5,"kid":10000,"tank_id":3,"name":"M7\u7267\u5e08","type":4,"level":1,"exp":0,"star":5,"quality":3,"attack":9100,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":233,"compat_skill_id":233,"morale":6,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":7,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":233,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":7,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":233,"type":3}},"max_blood":22000},"6":{"unique_id":6,"kid":10000,"tank_id":4,"name":"\u516c\u7f8a","type":2,"level":1,"exp":0,"star":5,"quality":3,"attack":9600,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":4,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":4,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":231,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":4,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":231,"type":3}},"max_blood":22000}}},"right":{"tank":[]},"is_win":1}}]]
	--local data = [[{"fight_result":{"fight_type":7,"ext":[],"start":{"left":{"tank":{"2":{"unique_id":2,"kid":10000,"tank_id":1,"name":"SU-14-1","type":4,"level":1,"exp":0,"star":5,"quality":2,"attack":2250,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":22000}},"user":{"nickname":"S\u5766\u514b\u56e2","level":1}},"right":{"tank":{"1":{"unique_id":1,"kid":10000,"tank_id":5,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":2,"level":30,"exp":0,"star":5,"quality":1,"attack":5625,"defense":1100,"blood":13827,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":13827},"2":{"unique_id":2,"kid":10000,"tank_id":6,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":6100,"defense":0,"blood":14000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":0,"max_blood":14000},"3":{"unique_id":3,"kid":10000,"tank_id":7,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":6458,"defense":0,"blood":12800,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":12800},"4":{"unique_id":4,"kid":10000,"tank_id":8,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":5625,"defense":690,"blood":12800,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":12800},"5":{"unique_id":5,"kid":10000,"tank_id":9,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":3,"level":30,"exp":0,"star":5,"quality":1,"attack":6100,"defense":1400,"blood":15000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":15000},"6":{"unique_id":6,"kid":10000,"tank_id":10,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":3,"level":30,"exp":0,"star":5,"quality":1,"attack":6458,"defense":1200,"blood":14500,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":14500}},"user":{"nickname":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","level":30}}},"fight":[{"pre":[],"battle":[{"attack":{"pos":2,"from":0,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":22000},"defense":[{"pos":2,"from":1,"skill_id":230,"hurt":2250,"blood":11750,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":1,"from":1,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":13827},"defense":[{"pos":2,"from":0,"skill_id":230,"hurt":5625,"blood":16375,"morale":2,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":2,"from":1,"skill_id":231,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":11750},"defense":[{"pos":1,"from":0,"skill_id":-1},{"pos":2,"from":0,"skill_id":231,"hurt":6100,"blood":10275,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":0,"skill_id":-1},{"pos":4,"from":0,"skill_id":-1},{"pos":5,"from":0,"skill_id":-1},{"pos":6,"from":0,"skill_id":-1}],"own":[]},{"attack":{"pos":3,"from":1,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":12800},"defense":[{"pos":2,"from":0,"skill_id":230,"hurt":6458,"blood":3817,"morale":2,"is_dodge":0,"type":0}],"own":[]}],"end":[]},{"pre":{"supply":{"4":{"unique_id":4,"kid":10000,"tank_id":2,"name":"T1\u91cd\u5766","type":3,"level":1,"exp":0,"star":5,"quality":3,"attack":8925,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":232,"compat_skill_id":232,"morale":4},"5":{"unique_id":5,"kid":10000,"tank_id":3,"name":"M7\u7267\u5e08","type":4,"level":1,"exp":0,"star":5,"quality":3,"attack":9100,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":233,"compat_skill_id":233,"morale":4},"6":{"unique_id":6,"kid":10000,"tank_id":4,"name":"\u516c\u7f8a","type":2,"level":1,"exp":0,"star":5,"quality":3,"attack":9600,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":4}}},"battle":[{"attack":{"pos":4,"from":0,"skill_id":232,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":22000},"defense":[{"pos":1,"from":1,"skill_id":232,"hurt":7825,"blood":6002,"morale":2,"is_dodge":0,"type":0},{"pos":2,"from":1,"skill_id":232,"hurt":8925,"blood":2825,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":1,"skill_id":232,"hurt":8925,"blood":3875,"morale":2,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":5,"from":0,"skill_id":233,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":22000},"defense":[{"pos":4,"from":1,"skill_id":233,"hurt":8410,"blood":4390,"morale":0,"is_dodge":0,"type":0},{"pos":5,"from":1,"skill_id":233,"hurt":7700,"blood":7300,"morale":0,"is_dodge":0,"type":0},{"pos":6,"from":1,"skill_id":233,"hurt":7900,"blood":6600,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":6,"from":0,"skill_id":231,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":22000},"defense":[{"pos":1,"from":1,"skill_id":231,"hurt":6002,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":2,"from":1,"skill_id":231,"hurt":2825,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":1,"skill_id":231,"hurt":3875,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":4,"from":1,"skill_id":231,"hurt":4390,"blood":0,"morale":0,"is_dodge":0,"type":0},{"pos":5,"from":1,"skill_id":231,"hurt":7300,"blood":0,"morale":0,"is_dodge":0,"type":0},{"pos":6,"from":1,"skill_id":231,"hurt":6600,"blood":0,"morale":0,"is_dodge":0,"type":0}],"own":[]}],"end":[]}],"end":{"left":{"tank":{"2":{"unique_id":2,"kid":10000,"tank_id":1,"name":"SU-14-1","type":4,"level":1,"exp":0,"star":5,"quality":2,"attack":2250,"defense":0,"blood":3817,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":2,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":1,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":230,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":1,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":230,"type":3}},"max_blood":22000},"4":{"unique_id":4,"kid":10000,"tank_id":2,"name":"T1\u91cd\u5766","type":3,"level":1,"exp":0,"star":5,"quality":3,"attack":8925,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":232,"compat_skill_id":232,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":232,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":232,"type":3}},"max_blood":22000},"5":{"unique_id":5,"kid":10000,"tank_id":3,"name":"M7\u7267\u5e08","type":4,"level":1,"exp":0,"star":5,"quality":3,"attack":9100,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":233,"compat_skill_id":233,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":7,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":233,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":7,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":233,"type":3}},"max_blood":22000},"6":{"unique_id":6,"kid":10000,"tank_id":4,"name":"\u516c\u7f8a","type":2,"level":1,"exp":0,"star":5,"quality":3,"attack":9600,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":4,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":231,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":4,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":231,"type":3}},"max_blood":22000}}},"right":{"tank":[]},"is_win":1}}}]]
	--local data = [[{"fight_result":{"fight_type":7,"ext":{"bg_id":2},"start":{"left":{"tank":{"2":{"unique_id":2,"kid":10000,"tank_id":1,"name":"SU-14-1","type":4,"level":1,"exp":0,"star":5,"quality":2,"attack":2250,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":22000}},"user":{"nickname":"S\u5766\u514b\u56e2","level":1}},"right":{"tank":{"1":{"unique_id":1,"kid":10000,"tank_id":5,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":2,"level":30,"exp":0,"star":5,"quality":1,"attack":5625,"defense":1100,"blood":13827,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":13827},"2":{"unique_id":2,"kid":10000,"tank_id":6,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":6100,"defense":0,"blood":14000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":0,"max_blood":14000},"3":{"unique_id":3,"kid":10000,"tank_id":7,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":6458,"defense":0,"blood":12800,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":12800},"4":{"unique_id":4,"kid":10000,"tank_id":8,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":5625,"defense":690,"blood":12800,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":12800},"5":{"unique_id":5,"kid":10000,"tank_id":9,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":3,"level":30,"exp":0,"star":5,"quality":1,"attack":6100,"defense":1400,"blood":15000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":15000},"6":{"unique_id":6,"kid":10000,"tank_id":10,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":3,"level":30,"exp":0,"star":5,"quality":1,"attack":6458,"defense":1200,"blood":14500,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":14500}},"user":{"nickname":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","level":30}}},"fight":[{"pre":[],"battle":[{"attack":{"pos":2,"from":0,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":22000,"type":0},"defense":[{"pos":2,"from":1,"skill_id":230,"hurt":2250,"blood":11750,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":1,"from":1,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":13827,"type":0},"defense":[{"pos":2,"from":0,"skill_id":230,"hurt":5625,"blood":16375,"morale":2,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":2,"from":1,"skill_id":231,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":11750,"type":0},"defense":[{"pos":1,"from":0,"skill_id":-1},{"pos":2,"from":0,"skill_id":231,"hurt":6100,"blood":10275,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":0,"skill_id":-1},{"pos":4,"from":0,"skill_id":-1},{"pos":5,"from":0,"skill_id":-1},{"pos":6,"from":0,"skill_id":-1}],"own":[]},{"attack":{"pos":3,"from":1,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":12800,"type":0},"defense":[{"pos":2,"from":0,"skill_id":230,"hurt":6458,"blood":3817,"morale":2,"is_dodge":0,"type":0}],"own":[]}],"end":[]},{"pre":{"supply":{"4":{"unique_id":4,"kid":10000,"tank_id":2,"name":"T1\u91cd\u5766","type":3,"level":1,"exp":0,"star":5,"quality":3,"attack":8925,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":232,"compat_skill_id":232,"morale":4},"5":{"unique_id":5,"kid":10000,"tank_id":3,"name":"M7\u7267\u5e08","type":4,"level":1,"exp":0,"star":5,"quality":3,"attack":9100,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":233,"compat_skill_id":233,"morale":4},"6":{"unique_id":6,"kid":10000,"tank_id":4,"name":"\u516c\u7f8a","type":2,"level":1,"exp":0,"star":5,"quality":3,"attack":9600,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":4}}},"battle":[{"attack":{"pos":4,"from":0,"skill_id":232,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":22000,"type":0},"defense":[{"pos":1,"from":1,"skill_id":232,"hurt":7825,"blood":6002,"morale":2,"is_dodge":0,"type":0},{"pos":2,"from":1,"skill_id":232,"hurt":8925,"blood":2825,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":1,"skill_id":232,"hurt":8925,"blood":3875,"morale":2,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":5,"from":0,"skill_id":233,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":22000,"type":0},"defense":[{"pos":4,"from":1,"skill_id":233,"hurt":8410,"blood":4390,"morale":0,"is_dodge":0,"type":0},{"pos":5,"from":1,"skill_id":233,"hurt":7700,"blood":7300,"morale":0,"is_dodge":0,"type":0},{"pos":6,"from":1,"skill_id":233,"hurt":7900,"blood":6600,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":6,"from":0,"skill_id":231,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":22000,"type":0},"defense":[{"pos":1,"from":1,"skill_id":231,"hurt":6002,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":2,"from":1,"skill_id":231,"hurt":2825,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":1,"skill_id":231,"hurt":3875,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":4,"from":1,"skill_id":231,"hurt":4390,"blood":0,"morale":0,"is_dodge":0,"type":0},{"pos":5,"from":1,"skill_id":231,"hurt":7300,"blood":0,"morale":0,"is_dodge":0,"type":0},{"pos":6,"from":1,"skill_id":231,"hurt":6600,"blood":0,"morale":0,"is_dodge":0,"type":0}],"own":[]}],"end":[]}],"end":{"left":{"tank":{"2":{"unique_id":2,"kid":10000,"tank_id":1,"name":"SU-14-1","type":4,"level":1,"exp":0,"star":5,"quality":2,"attack":2250,"defense":0,"blood":3817,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":2,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":1,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":230,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":1,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":230,"type":3}},"max_blood":22000},"4":{"unique_id":4,"kid":10000,"tank_id":2,"name":"T1\u91cd\u5766","type":3,"level":1,"exp":0,"star":5,"quality":3,"attack":8925,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":232,"compat_skill_id":232,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":232,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":232,"type":3}},"max_blood":22000},"5":{"unique_id":5,"kid":10000,"tank_id":3,"name":"M7\u7267\u5e08","type":4,"level":1,"exp":0,"star":5,"quality":3,"attack":9100,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":233,"compat_skill_id":233,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":7,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":233,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":7,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":233,"type":3}},"max_blood":22000},"6":{"unique_id":6,"kid":10000,"tank_id":4,"name":"\u516c\u7f8a","type":2,"level":1,"exp":0,"star":5,"quality":3,"attack":9600,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":4,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":231,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":4,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":231,"type":3}},"max_blood":22000}}},"right":{"tank":[]},"is_win":1}}}]]
	--local data = [[{"fight_result":{"fight_type":7,"ext":{"bg_id":2},"start":{"left":{"tank":{"2":{"unique_id":2,"kid":10000,"tank_id":1,"name":"SU-14-1","type":4,"level":1,"exp":0,"star":5,"quality":2,"attack":2250,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":22000}},"user":{"nickname":"S\u5766\u514b\u56e2","level":1}},"right":{"tank":{"1":{"unique_id":1,"kid":10000,"tank_id":5,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":2,"level":30,"exp":0,"star":5,"quality":1,"attack":5625,"defense":1100,"blood":13827,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":13827},"2":{"unique_id":2,"kid":10000,"tank_id":6,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":6100,"defense":0,"blood":14000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":0,"max_blood":14000},"3":{"unique_id":3,"kid":10000,"tank_id":7,"name":"\u654c\u65b9\u56f4\u527f\u5148\u950b","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":6458,"defense":0,"blood":12800,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":12800},"4":{"unique_id":4,"kid":10000,"tank_id":8,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":4,"level":30,"exp":0,"star":5,"quality":1,"attack":5625,"defense":690,"blood":12800,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":12800},"5":{"unique_id":5,"kid":10000,"tank_id":9,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":3,"level":30,"exp":0,"star":5,"quality":1,"attack":6100,"defense":1400,"blood":15000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":15000},"6":{"unique_id":6,"kid":10000,"tank_id":10,"name":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","type":3,"level":30,"exp":0,"star":5,"quality":1,"attack":6458,"defense":1200,"blood":14500,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":0,"max_blood":14500}},"user":{"nickname":"\u654c\u65b9\u56f4\u527f\u90e8\u961f","level":30}}},"fight":[{"pre":[],"battle":[{"attack":{"pos":2,"from":0,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":22000,"type":0},"defense":[{"pos":2,"from":1,"skill_id":230,"hurt":2250,"blood":11750,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":1,"from":1,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":13827,"type":0},"defense":[{"pos":2,"from":0,"skill_id":230,"hurt":5625,"blood":16375,"morale":2,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":2,"from":1,"skill_id":231,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":11750,"type":0},"defense":[{"pos":1,"from":0,"skill_id":-1},{"pos":2,"from":0,"skill_id":231,"hurt":6100,"blood":10275,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":0,"skill_id":-1},{"pos":4,"from":0,"skill_id":-1},{"pos":5,"from":0,"skill_id":-1},{"pos":6,"from":0,"skill_id":-1}],"own":[]},{"attack":{"pos":3,"from":1,"skill_id":230,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":12800,"type":0},"defense":[{"pos":2,"from":0,"skill_id":230,"hurt":6458,"blood":3817,"morale":2,"is_dodge":0,"type":0}],"own":[]}],"end":[]},{"pre":{"supply":{"4":{"unique_id":4,"kid":10000,"tank_id":2,"name":"T1\u91cd\u5766","type":3,"level":1,"exp":0,"star":5,"quality":3,"attack":8925,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":232,"compat_skill_id":232,"morale":4},"5":{"unique_id":5,"kid":10000,"tank_id":3,"name":"M7\u7267\u5e08","type":4,"level":1,"exp":0,"star":5,"quality":3,"attack":9100,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":233,"compat_skill_id":233,"morale":4},"6":{"unique_id":6,"kid":10000,"tank_id":4,"name":"\u516c\u7f8a","type":2,"level":1,"exp":0,"star":5,"quality":3,"attack":9600,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":4}}},"battle":[{"attack":{"pos":4,"from":0,"skill_id":232,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":22000,"type":0},"defense":[{"pos":1,"from":1,"skill_id":232,"hurt":7825,"blood":6002,"morale":2,"is_dodge":0,"type":0},{"pos":2,"from":1,"skill_id":232,"hurt":8925,"blood":2825,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":1,"skill_id":232,"hurt":8925,"blood":3875,"morale":2,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":5,"from":0,"skill_id":233,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":22000,"type":0},"defense":[{"pos":4,"from":1,"skill_id":233,"hurt":8410,"blood":4390,"morale":0,"is_dodge":0,"type":0},{"pos":5,"from":1,"skill_id":233,"hurt":7700,"blood":7300,"morale":0,"is_dodge":0,"type":0},{"pos":6,"from":1,"skill_id":233,"hurt":7900,"blood":6600,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":6,"from":0,"skill_id":231,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":22000,"type":0},"defense":[{"pos":1,"from":1,"skill_id":231,"hurt":6002,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":2,"from":1,"skill_id":231,"hurt":2825,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":3,"from":1,"skill_id":231,"hurt":3875,"blood":0,"morale":2,"is_dodge":0,"type":0},{"pos":4,"from":1,"skill_id":231,"hurt":4390,"blood":0,"morale":0,"is_dodge":0,"type":0},{"pos":5,"from":1,"skill_id":231,"hurt":7300,"blood":0,"morale":0,"is_dodge":0,"type":0},{"pos":6,"from":1,"skill_id":231,"hurt":6600,"blood":0,"morale":0,"is_dodge":0,"type":0}],"own":[]}],"end":[]}],"end":{"left":{"tank":{"2":{"unique_id":2,"kid":10000,"tank_id":1,"name":"SU-14-1","type":4,"level":1,"exp":0,"star":5,"quality":2,"attack":2250,"defense":0,"blood":3817,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":230,"compat_skill_id":230,"morale":2,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":1,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":230,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":1,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":230,"type":3}},"max_blood":22000},"4":{"unique_id":4,"kid":10000,"tank_id":2,"name":"T1\u91cd\u5766","type":3,"level":1,"exp":0,"star":5,"quality":3,"attack":8925,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":232,"compat_skill_id":232,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":232,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":232,"type":3}},"max_blood":22000},"5":{"unique_id":5,"kid":10000,"tank_id":3,"name":"M7\u7267\u5e08","type":4,"level":1,"exp":0,"star":5,"quality":3,"attack":9100,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":233,"compat_skill_id":233,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":7,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":233,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":7,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":233,"type":3}},"max_blood":22000},"6":{"unique_id":6,"kid":10000,"tank_id":4,"name":"\u516c\u7f8a","type":2,"level":1,"exp":0,"star":5,"quality":3,"attack":9600,"defense":0,"blood":22000,"wear":50,"anti_wear":50,"crit_hurt":0,"talent_id":158,"common_skill_id":231,"compat_skill_id":231,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":4,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":231,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":4,"enemy_type":1,"hurt_multiples":1,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":231,"type":3}},"max_blood":22000}}},"right":{"tank":[]},"is_win":1}}}]]
	local data_cn = [[{"fight_result":{"ext":{"bg_id":4},"end":{"right":{"tank":[]},"left":{"tank":{"2":{"hit_plus":0,"compat_skill_id":230,"unique_id":2,"max_blood":22000,"crit_rate":0,"morale":2,"talent":{"defense_plus":1,"hit_plus":0,"crit_rate":0,"talent_id":158,"dodge_rate":0,"name":"新手天赋全1","blank":[],"blood_plus":1,"disarm_anti":0,"attack_plus":1},"tech":{"blood_ratio":0,"attack_ratio":0,"defense_ratio":0},"quality":2,"buff":{"crit_rate":0,"batter":[]},"anti_wear":50,"blood":3967,"kid":10000,"star":5,"crit_hurt":0,"attack":2250,"common_skill_id":230,"skill":{"common_skill":{"skill_id":230,"enemy_type":1,"blank":[],"compat_fxid":3,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":1},"compat_skill":{"skill_id":230,"enemy_type":1,"blank":[],"compat_fxid":3,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":1}},"talent_id":158,"dodge_rate":0,"tank_id":1,"wear":50,"level":1,"exp":0,"type":2,"round_buff":[],"name":"公羊II","defense":50},"6":{"hit_plus":0,"compat_skill_id":231,"unique_id":6,"max_blood":22000,"crit_rate":0,"morale":0,"talent":{"defense_plus":1,"hit_plus":0,"crit_rate":0,"talent_id":158,"dodge_rate":0,"name":"新手天赋全1","blank":[],"blood_plus":1,"disarm_anti":0,"attack_plus":1},"tech":{"blood_ratio":0,"attack_ratio":0,"defense_ratio":0},"quality":3,"buff":{"crit_rate":0,"batter":[]},"anti_wear":50,"blood":22000,"kid":10000,"star":5,"crit_hurt":0,"attack":9600,"common_skill_id":231,"skill":{"common_skill":{"skill_id":231,"enemy_type":1,"blank":[],"compat_fxid":3,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":4},"compat_skill":{"skill_id":231,"enemy_type":1,"blank":[],"compat_fxid":3,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":4}},"talent_id":158,"dodge_rate":0,"tank_id":4,"wear":50,"level":1,"exp":0,"type":4,"round_buff":[],"name":"M36杰克逊","defense":50},"4":{"hit_plus":0,"compat_skill_id":232,"unique_id":4,"max_blood":22000,"crit_rate":0,"morale":0,"talent":{"defense_plus":1,"hit_plus":0,"crit_rate":0,"talent_id":158,"dodge_rate":0,"name":"新手天赋全1","blank":[],"blood_plus":1,"disarm_anti":0,"attack_plus":1},"tech":{"blood_ratio":0,"attack_ratio":0,"defense_ratio":0},"quality":3,"buff":{"crit_rate":0,"batter":[]},"anti_wear":50,"blood":22000,"kid":10000,"star":5,"crit_hurt":0,"attack":8925,"common_skill_id":232,"skill":{"common_skill":{"skill_id":232,"enemy_type":1,"blank":[],"compat_fxid":2,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":2},"compat_skill":{"skill_id":232,"enemy_type":1,"blank":[],"compat_fxid":2,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":2}},"talent_id":158,"dodge_rate":0,"tank_id":2,"wear":50,"level":1,"exp":0,"type":3,"round_buff":[],"name":"T1重坦","defense":50},"5":{"hit_plus":0,"compat_skill_id":233,"unique_id":5,"max_blood":22000,"crit_rate":0,"morale":0,"talent":{"defense_plus":1,"hit_plus":0,"crit_rate":0,"talent_id":158,"dodge_rate":0,"name":"新手天赋全1","blank":[],"blood_plus":1,"disarm_anti":0,"attack_plus":1},"tech":{"blood_ratio":0,"attack_ratio":0,"defense_ratio":0},"quality":3,"buff":{"crit_rate":0,"batter":[]},"anti_wear":50,"blood":22000,"kid":10000,"star":5,"crit_hurt":0,"attack":9100,"common_skill_id":233,"skill":{"common_skill":{"skill_id":233,"enemy_type":1,"blank":[],"compat_fxid":1,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":7},"compat_skill":{"skill_id":233,"enemy_type":1,"blank":[],"compat_fxid":1,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":7}},"talent_id":158,"dodge_rate":0,"tank_id":3,"wear":50,"level":1,"exp":0,"type":4,"round_buff":[],"name":"M7牧师","defense":50}}},"is_win":1},"fight":[{"pre":[],"end":[],"battle":[{"attack":{"is_compat":0,"skill_id":230,"is_crit":0,"add_m":0,"hurt":0,"pos":2,"morale":2,"type":0,"from":0,"add":0,"blood":22000},"own":[],"defense":[{"type":0,"skill_id":230,"pos":2,"morale":0,"is_dodge":0,"from":1,"hurt":2250,"blood":11750}]},{"attack":{"is_compat":0,"skill_id":230,"is_crit":0,"add_m":0,"hurt":0,"pos":1,"morale":2,"type":0,"from":1,"add":0,"blood":13827},"own":[],"defense":[{"type":0,"skill_id":230,"pos":2,"morale":2,"is_dodge":0,"from":0,"hurt":5575,"blood":16425}]},{"attack":{"is_compat":0,"skill_id":231,"is_crit":0,"add_m":0,"hurt":0,"pos":2,"morale":2,"type":0,"from":1,"add":0,"blood":11750},"own":[],"defense":[{"from":0,"skill_id":-1,"pos":1},{"type":0,"skill_id":231,"pos":2,"morale":2,"is_dodge":0,"from":0,"hurt":6050,"blood":10375},{"from":0,"skill_id":-1,"pos":3},{"from":0,"skill_id":-1,"pos":4},{"from":0,"skill_id":-1,"pos":5},{"from":0,"skill_id":-1,"pos":6}]},{"attack":{"is_compat":0,"skill_id":230,"is_crit":0,"add_m":0,"hurt":0,"pos":3,"morale":2,"type":0,"from":1,"add":0,"blood":12800},"own":[],"defense":[{"type":0,"skill_id":230,"pos":2,"morale":2,"is_dodge":0,"from":0,"hurt":6408,"blood":3967}]}]},{"pre":{"supply":{"4":{"unique_id":4,"anti_wear":50,"blood":22000,"kid":10000,"star":5,"crit_hurt":0,"attack":8925,"common_skill_id":232,"morale":4,"talent_id":158,"compat_skill_id":232,"tank_id":2,"wear":50,"level":1,"exp":0,"type":3,"quality":3,"name":"T1重坦","defense":0},"6":{"unique_id":6,"anti_wear":50,"blood":22000,"kid":10000,"star":5,"crit_hurt":0,"attack":9600,"common_skill_id":231,"morale":4,"talent_id":158,"compat_skill_id":231,"tank_id":4,"wear":50,"level":1,"exp":0,"type":4,"quality":3,"name":"M36杰克逊","defense":0},"5":{"unique_id":5,"anti_wear":50,"blood":22000,"kid":10000,"star":5,"crit_hurt":0,"attack":9100,"common_skill_id":233,"morale":4,"talent_id":158,"compat_skill_id":233,"tank_id":3,"wear":50,"level":1,"exp":0,"type":4,"quality":3,"name":"M7牧师","defense":0}}},"end":[],"battle":[{"attack":{"is_compat":1,"skill_id":232,"is_crit":0,"add_m":-4,"hurt":0,"pos":4,"morale":0,"type":0,"from":0,"add":0,"blood":22000},"own":[],"defense":[{"type":0,"skill_id":232,"pos":1,"morale":2,"is_dodge":0,"from":1,"hurt":7825,"blood":6002},{"type":0,"skill_id":232,"pos":2,"morale":2,"is_dodge":0,"from":1,"hurt":8925,"blood":2825},{"type":0,"skill_id":232,"pos":3,"morale":2,"is_dodge":0,"from":1,"hurt":8925,"blood":3875}]},{"attack":{"is_compat":1,"skill_id":233,"is_crit":0,"add_m":-4,"hurt":0,"pos":5,"morale":0,"type":0,"from":0,"add":0,"blood":22000},"own":[],"defense":[{"type":0,"skill_id":233,"pos":4,"morale":0,"is_dodge":0,"from":1,"hurt":8410,"blood":4390},{"type":0,"skill_id":233,"pos":5,"morale":0,"is_dodge":0,"from":1,"hurt":7700,"blood":7300},{"type":0,"skill_id":233,"pos":6,"morale":0,"is_dodge":0,"from":1,"hurt":7900,"blood":6600}]},{"attack":{"is_compat":1,"skill_id":231,"is_crit":0,"add_m":-4,"hurt":0,"pos":6,"morale":0,"type":0,"from":0,"add":0,"blood":22000},"own":[],"defense":[{"type":0,"skill_id":231,"pos":1,"morale":2,"is_dodge":0,"from":1,"hurt":6002,"blood":0},{"type":0,"skill_id":231,"pos":2,"morale":2,"is_dodge":0,"from":1,"hurt":2825,"blood":0},{"type":0,"skill_id":231,"pos":3,"morale":2,"is_dodge":0,"from":1,"hurt":3875,"blood":0},{"type":0,"skill_id":231,"pos":4,"morale":0,"is_dodge":0,"from":1,"hurt":4390,"blood":0},{"type":0,"skill_id":231,"pos":5,"morale":0,"is_dodge":0,"from":1,"hurt":7300,"blood":0},{"type":0,"skill_id":231,"pos":6,"morale":0,"is_dodge":0,"from":1,"hurt":6600,"blood":0}]}]}],"start":{"right":{"user":{"level":30,"nickname":"敌方围剿部队"},"tank":{"4":{"unique_id":4,"max_blood":12800,"anti_wear":50,"blood":12800,"kid":10000,"star":5,"crit_hurt":0,"attack":5625,"common_skill_id":230,"morale":0,"talent_id":158,"compat_skill_id":230,"tank_id":8,"wear":50,"level":30,"exp":0,"type":4,"quality":1,"name":"敌方围剿部队","defense":690},"1":{"unique_id":1,"max_blood":13827,"anti_wear":50,"blood":13827,"kid":10000,"star":5,"crit_hurt":0,"attack":5625,"common_skill_id":230,"morale":0,"talent_id":158,"compat_skill_id":230,"tank_id":5,"wear":50,"level":30,"exp":0,"type":2,"quality":1,"name":"敌方围剿先锋","defense":1100},"5":{"unique_id":5,"max_blood":15000,"anti_wear":50,"blood":15000,"kid":10000,"star":5,"crit_hurt":0,"attack":6100,"common_skill_id":230,"morale":0,"talent_id":158,"compat_skill_id":230,"tank_id":9,"wear":50,"level":30,"exp":0,"type":3,"quality":1,"name":"敌方围剿部队","defense":1400},"2":{"unique_id":2,"max_blood":14000,"anti_wear":50,"blood":14000,"kid":10000,"star":5,"crit_hurt":0,"attack":6100,"common_skill_id":231,"morale":0,"talent_id":158,"compat_skill_id":231,"tank_id":6,"wear":50,"level":30,"exp":0,"type":4,"quality":1,"name":"敌方围剿先锋","defense":0},"6":{"unique_id":6,"max_blood":14500,"anti_wear":50,"blood":14500,"kid":10000,"star":5,"crit_hurt":0,"attack":6458,"common_skill_id":230,"morale":0,"talent_id":158,"compat_skill_id":230,"tank_id":10,"wear":50,"level":30,"exp":0,"type":3,"quality":1,"name":"敌方围剿部队","defense":1200},"3":{"unique_id":3,"max_blood":12800,"anti_wear":50,"blood":12800,"kid":10000,"star":5,"crit_hurt":0,"attack":6458,"common_skill_id":230,"morale":0,"talent_id":158,"compat_skill_id":230,"tank_id":7,"wear":50,"level":30,"exp":0,"type":4,"quality":1,"name":"敌方围剿先锋","defense":0}}},"left":{"user":{"level":1,"nickname":"S坦克团"},"tank":{"2":{"unique_id":2,"max_blood":22000,"compat_skill_id":230,"hit_plus":0,"crit_rate":0,"anti_wear":50,"blood":22000,"kid":10000,"star":5,"crit_hurt":0,"attack":2250,"common_skill_id":230,"morale":0,"talent_id":158,"dodge_rate":0,"tank_id":1,"wear":50,"level":1,"exp":0,"type":2,"quality":2,"name":"公羊II","defense":50}}}},"fight_type":7}}]]
	local data_en = [[{"fight_result":{"ext":{"bg_id":4},"end":{"right":{"tank":[]},"left":{"tank":{"2":{"unique_id":2,"max_blood":22100,"compat_skill_id":230,"talent":{"defense_plus":1,"hit_plus":0,"crit_rate":0,"talent_id":158,"dodge_rate":0,"name":"新手天赋全1","blank":[],"blood_plus":1,"disarm_anti":0,"attack_plus":1},"tech":{"blood_ratio":1,"attack_ratio":1,"defense_ratio":1},"quality":2,"buff":{"anti_disarm_ratio":0,"batter":[],"defense_ratio":1,"hit_plus":0,"crit_rate":0,"blood_ratio":1,"attack_ratio":1,"dodge_rate":0},"morale":2,"anti_wear":50,"blood":3917,"kid":10000,"star":5,"icon":19,"attack":2290,"common_skill_id":230,"skill":{"common_skill":{"skill_id":230,"enemy_type":1,"blank":[],"compat_fx_id":3,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":1},"compat_skill":{"skill_id":230,"enemy_type":1,"blank":[],"compat_fx_id":3,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":1}},"talent_id":158,"crit_hurt":0,"tank_id":1,"wear":50,"level":1,"exp":0,"type":2,"round_buff":{"sub_hit":{"num":0,"end_round":0},"sub_defense":{"num":0,"end_round":0},"hurt_rate":0},"name":"Ram II","defense":0},"6":{"unique_id":6,"max_blood":22100,"compat_skill_id":231,"talent":{"defense_plus":1,"hit_plus":0,"crit_rate":0,"talent_id":158,"dodge_rate":0,"name":"新手天赋全1","blank":[],"blood_plus":1,"disarm_anti":0,"attack_plus":1},"tech":{"blood_ratio":1,"attack_ratio":1,"defense_ratio":1},"quality":3,"buff":{"anti_disarm_ratio":0,"batter":[],"defense_ratio":1,"hit_plus":0,"crit_rate":0,"blood_ratio":1,"attack_ratio":1,"dodge_rate":0},"morale":0,"anti_wear":50,"blood":22100,"kid":10000,"star":5,"icon":12,"attack":9640,"common_skill_id":231,"skill":{"common_skill":{"skill_id":231,"enemy_type":1,"blank":[],"compat_fx_id":3,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":4},"compat_skill":{"skill_id":231,"enemy_type":1,"blank":[],"compat_fx_id":3,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":4}},"talent_id":158,"crit_hurt":0,"tank_id":4,"wear":50,"level":1,"exp":0,"type":4,"round_buff":{"sub_hit":{"num":0,"end_round":0},"sub_defense":{"num":0,"end_round":0},"hurt_rate":0},"name":"M36 Jackson","defense":0},"4":{"unique_id":4,"max_blood":22100,"compat_skill_id":232,"talent":{"defense_plus":1,"hit_plus":0,"crit_rate":0,"talent_id":158,"dodge_rate":0,"name":"新手天赋全1","blank":[],"blood_plus":1,"disarm_anti":0,"attack_plus":1},"tech":{"blood_ratio":1,"attack_ratio":1,"defense_ratio":1},"quality":3,"buff":{"anti_disarm_ratio":0,"batter":[],"defense_ratio":1,"hit_plus":0,"crit_rate":0,"blood_ratio":1,"attack_ratio":1,"dodge_rate":0},"morale":0,"anti_wear":50,"blood":22100,"kid":10000,"star":5,"icon":18,"attack":8965,"common_skill_id":232,"skill":{"common_skill":{"skill_id":232,"enemy_type":1,"blank":[],"compat_fx_id":2,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":2},"compat_skill":{"skill_id":232,"enemy_type":1,"blank":[],"compat_fx_id":2,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":2}},"talent_id":158,"crit_hurt":0,"tank_id":2,"wear":50,"level":1,"exp":0,"type":3,"round_buff":{"sub_hit":{"num":0,"end_round":0},"sub_defense":{"num":0,"end_round":0},"hurt_rate":0},"name":"T1 Heavy Tank","defense":0},"5":{"unique_id":5,"max_blood":22100,"compat_skill_id":233,"talent":{"defense_plus":1,"hit_plus":0,"crit_rate":0,"talent_id":158,"dodge_rate":0,"name":"新手天赋全1","blank":[],"blood_plus":1,"disarm_anti":0,"attack_plus":1},"tech":{"blood_ratio":1,"attack_ratio":1,"defense_ratio":1},"quality":3,"buff":{"anti_disarm_ratio":0,"batter":[],"defense_ratio":1,"hit_plus":0,"crit_rate":0,"blood_ratio":1,"attack_ratio":1,"dodge_rate":0},"morale":0,"anti_wear":50,"blood":22100,"kid":10000,"star":5,"icon":13,"attack":9140,"common_skill_id":233,"skill":{"common_skill":{"skill_id":233,"enemy_type":1,"blank":[],"compat_fx_id":1,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":7},"compat_skill":{"skill_id":233,"enemy_type":1,"blank":[],"compat_fx_id":1,"own_target":0,"type":3,"own_type":0,"hurt_multiples":1,"enemy_effect_value":0,"own_effect_value":0,"name":"","enemy_target":7}},"talent_id":158,"crit_hurt":0,"tank_id":3,"wear":50,"level":1,"exp":0,"type":4,"round_buff":{"sub_hit":{"num":0,"end_round":0},"sub_defense":{"num":0,"end_round":0},"hurt_rate":0},"name":"M7 Priest","defense":0}}},"is_win":1},"fight":[{"pre":[],"end":[],"battle":[{"attack":{"is_compat":0,"skill_id":230,"is_crit":0,"add_m":0,"hurt":0,"pos":2,"morale":2,"type":0,"from":0,"add":0,"blood":22100},"own":[],"defense":[{"skill_id":230,"morale":0,"pos":2,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":2290,"blood":11710}]},{"attack":{"is_compat":0,"skill_id":230,"is_crit":0,"add_m":0,"hurt":0,"pos":1,"morale":2,"type":0,"from":1,"add":0,"blood":13827},"own":[],"defense":[{"skill_id":230,"morale":2,"pos":2,"is_dodge":0,"drop_t":0,"type":0,"from":0,"hurt":5625,"blood":16475}]},{"attack":{"is_compat":0,"skill_id":231,"is_crit":0,"add_m":0,"hurt":0,"pos":2,"morale":2,"type":0,"from":1,"add":0,"blood":11710},"own":[],"defense":[{"from":0,"skill_id":-1,"pos":1},{"skill_id":231,"morale":2,"pos":2,"is_dodge":0,"drop_t":0,"type":0,"from":0,"hurt":6100,"blood":10375},{"from":0,"skill_id":-1,"pos":3},{"from":0,"skill_id":-1,"pos":4},{"from":0,"skill_id":-1,"pos":5},{"from":0,"skill_id":-1,"pos":6}]},{"attack":{"is_compat":0,"skill_id":230,"is_crit":0,"add_m":0,"hurt":0,"pos":3,"morale":2,"type":0,"from":1,"add":0,"blood":12800},"own":[],"defense":[{"skill_id":230,"morale":2,"pos":2,"is_dodge":0,"drop_t":0,"type":0,"from":0,"hurt":6458,"blood":3917}]}]},{"pre":{"supply":{"4":{"unique_id":4,"max_blood":22000,"morale":4,"anti_wear":50,"blood":22000,"kid":10000,"star":5,"icon":18,"attack":8925,"common_skill_id":232,"compat_skill_id":232,"talent_id":158,"crit_hurt":0,"tank_id":2,"wear":50,"level":1,"exp":0,"type":3,"quality":3,"name":"T1 Heavy Tank","defense":0},"6":{"unique_id":6,"max_blood":22000,"morale":4,"anti_wear":50,"blood":22000,"kid":10000,"star":5,"icon":12,"attack":9600,"common_skill_id":231,"compat_skill_id":231,"talent_id":158,"crit_hurt":0,"tank_id":4,"wear":50,"level":1,"exp":0,"type":4,"quality":3,"name":"M36 Jackson","defense":0},"5":{"unique_id":5,"max_blood":22000,"morale":4,"anti_wear":50,"blood":22000,"kid":10000,"star":5,"icon":13,"attack":9100,"common_skill_id":233,"compat_skill_id":233,"talent_id":158,"crit_hurt":0,"tank_id":3,"wear":50,"level":1,"exp":0,"type":4,"quality":3,"name":"M7 Priest","defense":0}}},"end":[],"battle":[{"attack":{"is_compat":1,"skill_id":232,"is_crit":0,"add_m":-4,"hurt":0,"pos":4,"morale":0,"type":0,"from":0,"add":0,"blood":22100},"own":[],"defense":[{"skill_id":232,"morale":2,"pos":1,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":7865,"blood":5962},{"skill_id":232,"morale":2,"pos":2,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":8965,"blood":2745},{"skill_id":232,"morale":2,"pos":3,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":8965,"blood":3835}]},{"attack":{"is_compat":1,"skill_id":233,"is_crit":0,"add_m":-4,"hurt":0,"pos":5,"morale":0,"type":0,"from":0,"add":0,"blood":22100},"own":[],"defense":[{"skill_id":233,"morale":0,"pos":4,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":8450,"blood":4350},{"skill_id":233,"morale":0,"pos":5,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":7740,"blood":7260},{"skill_id":233,"morale":0,"pos":6,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":7940,"blood":6560}]},{"attack":{"is_compat":1,"skill_id":231,"is_crit":0,"add_m":-4,"hurt":0,"pos":6,"morale":0,"type":0,"from":0,"add":0,"blood":22100},"own":[],"defense":[{"skill_id":231,"morale":2,"pos":1,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":5962,"blood":0},{"skill_id":231,"morale":2,"pos":2,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":2745,"blood":0},{"skill_id":231,"morale":2,"pos":3,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":3835,"blood":0},{"skill_id":231,"morale":0,"pos":4,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":4350,"blood":0},{"skill_id":231,"morale":0,"pos":5,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":7260,"blood":0},{"skill_id":231,"morale":0,"pos":6,"is_dodge":0,"drop_t":0,"type":0,"from":1,"hurt":6560,"blood":0}]}]}],"start":{"right":{"user":{"level":30,"nickname":"38th Imperial Battalion"},"tank":{"4":{"unique_id":4,"max_blood":12800,"morale":0,"anti_wear":50,"blood":12800,"kid":10000,"star":5,"icon":51,"attack":5625,"common_skill_id":230,"compat_skill_id":230,"talent_id":158,"crit_hurt":0,"tank_id":8,"wear":50,"level":30,"exp":0,"type":4,"quality":1,"name":"Ferdinand","defense":690},"1":{"unique_id":1,"max_blood":13827,"morale":0,"anti_wear":50,"blood":13827,"kid":10000,"star":5,"icon":33,"attack":5625,"common_skill_id":230,"compat_skill_id":230,"talent_id":158,"crit_hurt":0,"tank_id":5,"wear":50,"level":30,"exp":0,"type":2,"quality":1,"name":"Pz.kpfw.IV","defense":1100},"5":{"unique_id":5,"max_blood":15000,"morale":0,"anti_wear":50,"blood":15000,"kid":10000,"star":5,"icon":50,"attack":6100,"common_skill_id":230,"compat_skill_id":230,"talent_id":158,"crit_hurt":0,"tank_id":9,"wear":50,"level":30,"exp":0,"type":3,"quality":1,"name":"Tiger II","defense":1400},"2":{"unique_id":2,"max_blood":14000,"morale":0,"anti_wear":50,"blood":14000,"kid":10000,"star":5,"icon":45,"attack":6100,"common_skill_id":231,"compat_skill_id":231,"talent_id":158,"crit_hurt":0,"tank_id":6,"wear":50,"level":30,"exp":0,"type":4,"quality":1,"name":"Dicker Max","defense":0},"6":{"unique_id":6,"max_blood":14500,"morale":0,"anti_wear":50,"blood":14500,"kid":10000,"star":5,"icon":49,"attack":6458,"common_skill_id":230,"compat_skill_id":230,"talent_id":158,"crit_hurt":0,"tank_id":10,"wear":50,"level":30,"exp":0,"type":3,"quality":1,"name":"Tiger","defense":1200},"3":{"unique_id":3,"max_blood":12800,"morale":0,"anti_wear":50,"blood":12800,"kid":10000,"star":5,"icon":32,"attack":6458,"common_skill_id":230,"compat_skill_id":230,"talent_id":158,"crit_hurt":0,"tank_id":7,"wear":50,"level":30,"exp":0,"type":4,"quality":1,"name":"Hetzer","defense":0}}},"left":{"user":{"level":1,"nickname":" S StuG Corps"},"tank":{"2":{"unique_id":2,"max_blood":22100,"morale":0,"anti_wear":50,"blood":22100,"kid":10000,"star":5,"icon":19,"attack":2290,"common_skill_id":230,"compat_skill_id":230,"talent_id":158,"crit_hurt":0,"tank_id":1,"wear":50,"level":1,"exp":0,"type":2,"quality":2,"name":"Ram II","defense":0}}}},"fight_type":7}}]]
	local jdata = qy.json.decode(qy.language == "cn" and  data_cn or data_en)
	-- print(jdata)
	return jdata.fight_result
end

function GuideModel:getOtherBattleData()
	local data = [[{"award":[{"type":3,"num":700}],"user_exp":{"is_max_level":false,"add_exp":10,"upgrade_level":0,"upgrade_level_list":[],"open_formation":[]},"task":{"daily_task_list":[{"task_id":2,"type":2,"complete_times":1,"status":0,"total_times":10}],"one_times_list":[{"task_id":1,"type":1,"complete_times":2,"status":0},{"task_id":6,"type":3,"complete_times":0,"status":0},{"task_id":9,"type":5,"complete_times":0,"status":0},{"task_id":22,"type":10,"complete_times":0,"status":0},{"task_id":28,"type":11,"complete_times":0,"status":0}]},"baseinfo":{"kid":10284,"channel":"qiyou","uid":1624,"platform":"ios","server":"s1","nickname":"Louis\u00b7\u9ea6\u514b","exp":6745,"level":12,"status":0,"login_mark":"m55bb1d1d8fe84","fight_power":7877,"fight_power_max":7877},"resource":{"kid":10284,"silver":1165673,"energy":185,"energy_uptime":1438326164,"exp_card":14,"technology_hammer":0,"blue_iron":0,"purple_iron":5,"orange_iron":0,"expedition_coins":0,"whisky":0},"chapter":{"complete":0,"current":1,"list":{"1":{"chapter_id":1,"status":0,"is_draw_award":0,"draw_award_time":0}}},"scene":{"complete":2,"current":3,"list":{"1":{"scene_id":1,"status":1,"is_draw_award":1,"draw_award_time":1438261203},"2":{"scene_id":2,"status":1,"is_draw_award":1,"draw_award_time":1438263460},"3":{"scene_id":3,"status":0,"is_draw_award":0,"draw_award_time":0}}},"checkpoint":{"complete":21,"current":22,"list":{"1":{"checkpoint_id":1,"status":1,"times":1,"times_uptime":1438260749},"2":{"checkpoint_id":2,"status":1,"times":1,"times_uptime":1438260843},"3":{"checkpoint_id":3,"status":1,"times":1,"times_uptime":1438260856},"4":{"checkpoint_id":4,"status":1,"times":1,"times_uptime":1438260878},"5":{"checkpoint_id":5,"status":1,"times":1,"times_uptime":1438261176},"6":{"checkpoint_id":6,"status":1,"times":1,"times_uptime":1438261211},"7":{"checkpoint_id":7,"status":1,"times":2,"times_uptime":1438261911},"8":{"checkpoint_id":8,"status":1,"times":1,"times_uptime":1438261927},"9":{"checkpoint_id":9,"status":1,"times":1,"times_uptime":1438261990},"10":{"checkpoint_id":10,"status":1,"times":1,"times_uptime":1438262023},"11":{"checkpoint_id":11,"status":1,"times":1,"times_uptime":1438326164},"12":{"checkpoint_id":12,"status":1,"times":1,"times_uptime":1438263439},"13":{"checkpoint_id":13,"status":1,"times":1,"times_uptime":1438263466},"14":{"checkpoint_id":14,"status":1,"times":1,"times_uptime":1438263486},"15":{"checkpoint_id":15,"status":1,"times":1,"times_uptime":1438263500},"16":{"checkpoint_id":16,"status":1,"times":1,"times_uptime":1438263536},"17":{"checkpoint_id":17,"status":1,"times":1,"times_uptime":1438263667},"18":{"checkpoint_id":18,"status":1,"times":2,"times_uptime":1438263698},"19":{"checkpoint_id":19,"status":1,"times":4,"times_uptime":1438263883},"20":{"checkpoint_id":20,"status":1,"times":3,"times_uptime":1438263758},"21":{"checkpoint_id":21,"status":1,"times":1,"times_uptime":1438267231},"22":{"checkpoint_id":22,"status":0,"times":0,"times_uptime":0}}},"fight_result":{"fight_type":1,"ext":{"skip":1,"special":11},"start":{"left":{"tank":{"1":{"unique_id":2,"kid":10284,"tank_id":13,"name":"M7\u7267\u5e08","type":4,"level":7,"exp":531,"star":4,"quality":3,"status":1,"position":"p_1","is_train":1,"train_pos":"p_1","attack":1232,"defense":348,"blood":1125,"wear":85,"anti_wear":63,"crit_hurt":0,"talent_id":13,"common_skill_id":25,"compat_skill_id":26,"morale":0,"expedition_status":0,"expedition_position":"","expedition_equip":{"gun":0,"bullet":0,"armor":0,"engine":0},"max_blood":1125},"2":{"unique_id":1,"kid":10284,"tank_id":1,"name":"SU-14-1","type":4,"level":1,"exp":0,"star":3,"quality":2,"status":1,"position":"p_2","is_train":0,"train_pos":"","attack":263,"defense":75,"blood":280,"wear":76,"anti_wear":60,"crit_hurt":0,"talent_id":1,"common_skill_id":1,"compat_skill_id":2,"morale":0,"expedition_status":0,"expedition_position":"","expedition_equip":{"gun":0,"bullet":0,"armor":0,"engine":0},"max_blood":280},"3":{"unique_id":7,"kid":10284,"tank_id":40,"name":"\u5c0f\u98de\u8c61","type":2,"level":6,"exp":921,"star":5,"quality":4,"status":1,"position":"p_3","is_train":1,"train_pos":"p_2","attack":1681,"defense":930,"blood":3270,"wear":102,"anti_wear":110,"crit_hurt":0,"talent_id":40,"common_skill_id":79,"compat_skill_id":80,"morale":0,"expedition_status":0,"expedition_position":"","expedition_equip":{"gun":0,"bullet":0,"armor":0,"engine":0},"max_blood":3270}},"user":{"nickname":"Louis\u00b7\u9ea6\u514b","level":12}},"right":{"tank":{"5":{"unique_id":5,"kid":10000,"tank_id":11,"name":"\u767d\u8272\u864e\u5f0f","type":5,"level":30,"exp":0,"star":5,"quality":5,"attack":12000,"defense":5300,"blood":640000,"wear":150,"anti_wear":0,"crit_hurt":0,"talent_id":107,"common_skill_id":135,"compat_skill_id":135,"morale":0,"max_blood":640000}},"user":{"nickname":"\u7b2c2\u88c5\u7532\u519b\u56e2","level":5}}},"fight":[{"pre":[],"battle":[{"attack":{"pos":1,"from":0,"skill_id":25,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":1125},"defense":[{"pos":5,"from":1,"skill_id":25,"hurt":3,"blood":639997,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":2,"from":0,"skill_id":1,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":280},"defense":[{"pos":5,"from":1,"skill_id":1,"hurt":1,"blood":639996,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":5,"from":1,"skill_id":135,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":639996},"defense":[{"pos":2,"from":0,"skill_id":135,"hurt":280,"blood":0,"morale":2,"is_dodge":0,"type":0}],"own":[]}],"end":[]},{"pre":{"supply":{"4":{"unique_id":4,"kid":10000,"tank_id":12,"name":"M46\u5df4\u987f","type":2,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":689,"blood":2700,"wear":50,"anti_wear":100,"crit_hurt":0,"talent_id":158,"common_skill_id":105,"compat_skill_id":157,"morale":4},"5":{"unique_id":5,"kid":10000,"tank_id":13,"name":"M26\u6f58\u5174","type":2,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":1120,"blood":3500,"wear":50,"anti_wear":120,"crit_hurt":0,"talent_id":158,"common_skill_id":109,"compat_skill_id":169,"morale":4},"6":{"unique_id":6,"kid":10000,"tank_id":14,"name":"IS-2\u65af\u5927\u6797","type":3,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":1200,"blood":3300,"wear":50,"anti_wear":115,"crit_hurt":0,"talent_id":158,"common_skill_id":93,"compat_skill_id":152,"morale":4}}},"battle":[{"attack":{"pos":4,"from":0,"skill_id":157,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":2700},"defense":[{"pos":5,"from":1,"skill_id":157,"hurt":103739,"blood":536257,"morale":2,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":5,"from":0,"skill_id":169,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":3500},"defense":[{"pos":5,"from":1,"skill_id":169,"hurt":66690,"blood":469567,"morale":2,"is_dodge":0,"type":8}],"own":[]},{"attack":{"pos":6,"from":0,"skill_id":152,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":3300},"defense":[{"pos":5,"from":1,"skill_id":152,"hurt":74100,"blood":395467,"morale":2,"is_dodge":0,"type":0}],"own":[]}],"end":{"retreat":[{"pos":5,"from":1}]}}],"end":{"left":{"tank":{"1":{"unique_id":2,"kid":10284,"tank_id":13,"name":"M7\u7267\u5e08","type":4,"level":7,"exp":531,"star":4,"quality":3,"status":1,"position":"p_1","is_train":1,"train_pos":"p_1","attack":1232,"defense":348,"blood":1125,"wear":85,"anti_wear":63,"crit_hurt":0,"talent_id":13,"common_skill_id":25,"compat_skill_id":26,"morale":2,"equip":{"gun":3,"bullet":4,"armor":5,"engine":0},"expedition_status":0,"expedition_position":"","expedition_equip":{"gun":0,"bullet":0,"armor":0,"engine":0},"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1.55,"blank":[],"blood_plus":1,"crit_rate":100,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"M7\u7267\u5e08","talent_id":13},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":5,"enemy_type":1,"hurt_multiples":1.3,"name":"M7\u7267\u5e08","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":25,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":2,"enemy_target":5,"enemy_type":5,"hurt_multiples":2.2,"name":"M7\u7267\u5e08","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":26,"type":3}},"max_blood":1125},"3":{"unique_id":7,"kid":10284,"tank_id":40,"name":"\u5c0f\u98de\u8c61","type":2,"level":6,"exp":921,"star":5,"quality":4,"status":1,"position":"p_3","is_train":1,"train_pos":"p_2","attack":1681,"defense":930,"blood":3270,"wear":102,"anti_wear":110,"crit_hurt":0,"talent_id":40,"common_skill_id":79,"compat_skill_id":80,"morale":0,"equip":{"gun":8,"bullet":9,"armor":0,"engine":0},"expedition_status":0,"expedition_position":"","expedition_equip":{"gun":0,"bullet":0,"armor":0,"engine":0},"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1.8,"blank":[],"blood_plus":2,"crit_rate":0,"defense_plus":2,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u5c0f\u98de\u8c61","talent_id":40},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1,"name":"\u5c0f\u98de\u8c61","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":79,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1.6,"name":"\u5c0f\u98de\u8c61","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":80,"type":3}},"max_blood":3270},"4":{"unique_id":4,"kid":10000,"tank_id":12,"name":"M46\u5df4\u987f","type":2,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":689,"blood":2700,"wear":50,"anti_wear":100,"crit_hurt":0,"talent_id":158,"common_skill_id":105,"compat_skill_id":157,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1.8,"name":"M46\u5df4\u987f","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":105,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":1,"enemy_type":1,"hurt_multiples":2.8,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":157,"type":3}},"max_blood":2700},"5":{"unique_id":5,"kid":10000,"tank_id":13,"name":"M26\u6f58\u5174","type":2,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":1120,"blood":3500,"wear":50,"anti_wear":120,"crit_hurt":0,"talent_id":158,"common_skill_id":109,"compat_skill_id":169,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":16,"enemy_target":1,"enemy_type":5,"hurt_multiples":3.5,"name":"\u9f20\u5f0f\u8d85\u91cd\u5766","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":109,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":150,"enemy_target":1,"enemy_type":8,"hurt_multiples":1.8,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":169,"type":3}},"max_blood":3500},"6":{"unique_id":6,"kid":10000,"tank_id":14,"name":"IS-2\u65af\u5927\u6797","type":3,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":1200,"blood":3300,"wear":50,"anti_wear":115,"crit_hurt":0,"talent_id":158,"common_skill_id":93,"compat_skill_id":152,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u65b0\u624b\u5929\u8d4b\u51681","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":600,"enemy_target":7,"enemy_type":2,"hurt_multiples":2,"name":"IS-2\u65af\u5927\u6797","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":93,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":100,"enemy_target":1,"enemy_type":9,"hurt_multiples":2,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":152,"type":3}},"max_blood":3300}}},"right":{"tank":{"5":{"unique_id":5,"kid":10000,"tank_id":11,"name":"\u767d\u8272\u864e\u5f0f","type":5,"level":30,"exp":0,"star":5,"quality":5,"attack":12000,"defense":5300,"blood":395467,"wear":150,"anti_wear":0,"crit_hurt":0,"talent_id":107,"common_skill_id":135,"compat_skill_id":135,"morale":2,"buff":{"crit_rate":0,"batter":[],"sub_hit":150},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":0.8,"blank":[],"blood_plus":1.28,"crit_rate":0,"defense_plus":1.06,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"\u602a\u7269\u5929\u8d4b52","talent_id":107},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":5,"enemy_type":1,"hurt_multiples":1.4,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":135,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":5,"enemy_type":1,"hurt_multiples":1.4,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":135,"type":3}},"max_blood":640000}}},"is_win":1}},"is_first":false}]]
	-- local data = [[{"award":[{"type":3,"num":7000}],"user_exp":{"is_max_level":false,"add_exp":2600,"upgrade_level":0,"upgrade_level_list":[],"open_formation":[]},"task":[],"baseinfo":{"kid":10232,"channel":"qiyou","uid":1546,"platform":"ios","server":"s1","nickname":"Rod·罗伯特","exp":2915,"level":7,"status":0,"login_mark":"m55b326e5dc5fb","fight_power":5474,"fight_power_max":5474},"resource":{"kid":10232,"silver":256262,"energy":180,"energy_uptime":1437804530,"exp_card":5,"technology_hammer":0,"blue_iron":0,"purple_iron":0,"orange_iron":0,"expedition_coins":0,"whisky":0},"chapter":{"complete":0,"current":1,"list":{"1":{"chapter_id":1,"status":0,"is_draw_award":0,"draw_award_time":0}}},"scene":{"complete":1,"current":2,"list":{"1":{"scene_id":1,"status":1,"is_draw_award":1,"draw_award_time":1437804460},"2":{"scene_id":2,"status":0,"is_draw_award":0,"draw_award_time":0}}},"checkpoint":{"complete":11,"current":12,"list":{"1":{"checkpoint_id":1,"status":1,"times":1,"times_uptime":1437804298},"2":{"checkpoint_id":2,"status":1,"times":1,"times_uptime":1437804343},"3":{"checkpoint_id":3,"status":1,"times":1,"times_uptime":1437804373},"4":{"checkpoint_id":4,"status":1,"times":1,"times_uptime":1437804404},"5":{"checkpoint_id":5,"status":1,"times":1,"times_uptime":1437804441},"6":{"checkpoint_id":6,"status":1,"times":1,"times_uptime":1437804473},"7":{"checkpoint_id":7,"status":1,"times":2,"times_uptime":1437804574},"8":{"checkpoint_id":8,"status":1,"times":1,"times_uptime":1437804594},"9":{"checkpoint_id":9,"status":1,"times":1,"times_uptime":1437804609},"10":{"checkpoint_id":10,"status":1,"times":1,"times_uptime":1437804639},"11":{"checkpoint_id":11,"status":1,"times":1,"times_uptime":1437804673},"12":{"checkpoint_id":12,"status":0,"times":0,"times_uptime":0}}},"fight_result":{"fight_type":1,"ext":{"skip":0,"special":11},"start":{"left":{"tank":{"1":{"unique_id":2,"kid":10232,"tank_id":18,"name":"T14","type":3,"level":1,"exp":0,"star":4,"quality":3,"status":1,"position":"p_1","is_train":0,"train_pos":"","attack":454,"defense":434,"blood":1050,"wear":75,"anti_wear":72,"crit_hurt":0,"talent_id":18,"common_skill_id":35,"compat_skill_id":36,"morale":0,"expedition_status":0,"expedition_position":"","expedition_equip":{"gun":0,"bullet":0,"armor":0,"engine":0},"max_blood":1050},"2":{"unique_id":1,"kid":10232,"tank_id":1,"name":"SU-14-1","type":4,"level":1,"exp":0,"star":3,"quality":2,"status":1,"position":"p_2","is_train":0,"train_pos":"","attack":263,"defense":75,"blood":280,"wear":76,"anti_wear":60,"crit_hurt":0,"talent_id":1,"common_skill_id":1,"compat_skill_id":2,"morale":0,"expedition_status":0,"expedition_position":"","expedition_equip":{"gun":0,"bullet":0,"armor":0,"engine":0},"max_blood":280},"3":{"unique_id":7,"kid":10232,"tank_id":40,"name":"小飞象","type":2,"level":1,"exp":0,"star":5,"quality":4,"status":1,"position":"p_3","is_train":0,"train_pos":"","attack":909,"defense":700,"blood":2120,"wear":102,"anti_wear":110,"crit_hurt":0,"talent_id":40,"common_skill_id":79,"compat_skill_id":80,"morale":0,"expedition_status":0,"expedition_position":"","expedition_equip":{"gun":0,"bullet":0,"armor":0,"engine":0},"max_blood":2120}},"user":{"nickname":"Rod·罗伯特","level":7}},"right":{"tank":{"2":{"unique_id":2,"kid":10000,"tank_id":11,"name":"白色虎式","type":5,"level":30,"exp":0,"star":5,"quality":5,"attack":12000,"defense":5300,"blood":640000,"wear":150,"anti_wear":0,"crit_hurt":0,"talent_id":107,"common_skill_id":135,"compat_skill_id":135,"morale":0,"max_blood":640000}},"user":{"nickname":"第2装甲军团","level":5}}},"fight":[{"pre":[],"battle":[{"attack":{"pos":1,"from":0,"skill_id":35,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":1050},"defense":[{"pos":2,"from":1,"skill_id":35,"hurt":2,"blood":639998,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":2,"from":0,"skill_id":1,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":280},"defense":[{"pos":2,"from":1,"skill_id":1,"hurt":1,"blood":639997,"morale":0,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":2,"from":1,"skill_id":135,"is_compat":0,"add_m":0,"morale":2,"is_crit":0,"hurt":0,"add":0,"blood":639997},"defense":[{"pos":2,"from":0,"skill_id":135,"hurt":280,"blood":0,"morale":2,"is_dodge":0,"type":0}],"own":[]}],"end":[]},{"pre":{"supply":{"4":{"unique_id":4,"kid":10000,"tank_id":12,"name":"M46巴顿","type":2,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":689,"blood":2700,"wear":50,"anti_wear":100,"crit_hurt":0,"talent_id":158,"common_skill_id":105,"compat_skill_id":157,"morale":4},"5":{"unique_id":5,"kid":10000,"tank_id":13,"name":"M26潘兴","type":2,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":1120,"blood":3500,"wear":50,"anti_wear":120,"crit_hurt":0,"talent_id":158,"common_skill_id":109,"compat_skill_id":169,"morale":4},"6":{"unique_id":6,"kid":10000,"tank_id":14,"name":"IS-2斯大林","type":3,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":1200,"blood":3300,"wear":50,"anti_wear":115,"crit_hurt":0,"talent_id":158,"common_skill_id":93,"compat_skill_id":152,"morale":4}}},"battle":[{"attack":{"pos":4,"from":0,"skill_id":157,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":2700},"defense":[{"pos":2,"from":1,"skill_id":157,"hurt":103739,"blood":536258,"morale":2,"is_dodge":0,"type":0}],"own":[]},{"attack":{"pos":5,"from":0,"skill_id":169,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":3500},"defense":[{"pos":2,"from":1,"skill_id":169,"hurt":66690,"blood":469568,"morale":2,"is_dodge":0,"type":8}],"own":[]},{"attack":{"pos":6,"from":0,"skill_id":152,"is_compat":1,"add_m":-4,"morale":0,"is_crit":0,"hurt":0,"add":0,"blood":3300},"defense":[{"pos":2,"from":1,"skill_id":152,"hurt":74100,"blood":395468,"morale":2,"is_dodge":0,"type":0}],"own":[]}],"end":{"retreat":[{"pos":2,"from":1}]}}],"end":{"left":{"tank":{"1":{"unique_id":2,"kid":10232,"tank_id":18,"name":"T14","type":3,"level":1,"exp":0,"star":4,"quality":3,"status":1,"position":"p_1","is_train":0,"train_pos":"","attack":454,"defense":434,"blood":1050,"wear":75,"anti_wear":72,"crit_hurt":0,"talent_id":18,"common_skill_id":35,"compat_skill_id":36,"morale":2,"equip":{"gun":3,"bullet":4,"armor":5,"engine":0},"expedition_status":0,"expedition_position":"","expedition_equip":{"gun":0,"bullet":0,"armor":0,"engine":0},"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1.75,"crit_rate":0,"defense_plus":1.55,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"T14","talent_id":18},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":1,"enemy_type":1,"hurt_multiples":1.2,"name":"T14","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":35,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":600,"enemy_target":3,"enemy_type":2,"hurt_multiples":1.3,"name":"T14","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":36,"type":3}},"max_blood":1050},"3":{"unique_id":7,"kid":10232,"tank_id":40,"name":"小飞象","type":2,"level":1,"exp":0,"star":5,"quality":4,"status":1,"position":"p_3","is_train":0,"train_pos":"","attack":909,"defense":700,"blood":2120,"wear":102,"anti_wear":110,"crit_hurt":0,"talent_id":40,"common_skill_id":79,"compat_skill_id":80,"morale":0,"equip":{"gun":0,"bullet":0,"armor":0,"engine":0},"expedition_status":0,"expedition_position":"","expedition_equip":{"gun":0,"bullet":0,"armor":0,"engine":0},"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1.8,"blank":[],"blood_plus":2,"crit_rate":0,"defense_plus":2,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"小飞象","talent_id":40},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1,"name":"小飞象","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":79,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1.6,"name":"小飞象","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":80,"type":3}},"max_blood":2120},"4":{"unique_id":4,"kid":10000,"tank_id":12,"name":"M46巴顿","type":2,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":689,"blood":2700,"wear":50,"anti_wear":100,"crit_hurt":0,"talent_id":158,"common_skill_id":105,"compat_skill_id":157,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"新手天赋全1","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":2,"enemy_type":1,"hurt_multiples":1.8,"name":"M46巴顿","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":105,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":1,"enemy_type":1,"hurt_multiples":2.8,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":157,"type":3}},"max_blood":2700},"5":{"unique_id":5,"kid":10000,"tank_id":13,"name":"M26潘兴","type":2,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":1120,"blood":3500,"wear":50,"anti_wear":120,"crit_hurt":0,"talent_id":158,"common_skill_id":109,"compat_skill_id":169,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"新手天赋全1","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":16,"enemy_target":1,"enemy_type":5,"hurt_multiples":3.5,"name":"鼠式超重坦","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":109,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":150,"enemy_target":1,"enemy_type":8,"hurt_multiples":1.8,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":169,"type":3}},"max_blood":3500},"6":{"unique_id":6,"kid":10000,"tank_id":14,"name":"IS-2斯大林","type":3,"level":1,"exp":0,"star":5,"quality":5,"attack":30000,"defense":1200,"blood":3300,"wear":50,"anti_wear":115,"crit_hurt":0,"talent_id":158,"common_skill_id":93,"compat_skill_id":152,"morale":0,"buff":{"crit_rate":0,"batter":[]},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":1,"blank":[],"blood_plus":1,"crit_rate":0,"defense_plus":1,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"新手天赋全1","talent_id":158},"skill":{"common_skill":{"blank":[],"enemy_effect_value":600,"enemy_target":7,"enemy_type":2,"hurt_multiples":2,"name":"IS-2斯大林","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":93,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":100,"enemy_target":1,"enemy_type":9,"hurt_multiples":2,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":152,"type":3}},"max_blood":3300}}},"right":{"tank":{"2":{"unique_id":2,"kid":10000,"tank_id":11,"name":"白色虎式","type":5,"level":30,"exp":0,"star":5,"quality":5,"attack":12000,"defense":5300,"blood":395468,"wear":150,"anti_wear":0,"crit_hurt":0,"talent_id":107,"common_skill_id":135,"compat_skill_id":135,"morale":2,"buff":{"crit_rate":0,"batter":[],"sub_hit":150},"round_buff":[],"tech":{"attack_ratio":0,"defense_ratio":0,"blood_ratio":0},"talent":{"attack_plus":0.8,"blank":[],"blood_plus":1.28,"crit_rate":0,"defense_plus":1.06,"disarm_anti":0,"dodge_rate":0,"hit_plus":0,"name":"怪物天赋52","talent_id":107},"skill":{"common_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":5,"enemy_type":1,"hurt_multiples":1.4,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":135,"type":3},"compat_skill":{"blank":[],"enemy_effect_value":0,"enemy_target":5,"enemy_type":1,"hurt_multiples":1.4,"name":"","own_effect_value":0,"own_target":0,"own_type":0,"skill_id":135,"type":3}},"max_blood":640000}}},"is_win":1}},"is_first":true}]]
	local jdata = qy.json.decode(data)
	return jdata.fight_result
end

---------------触发式引导-----------------------------------------------------------
function GuideModel:__initTriggerGuideData()
	local timer = qy.tank.utils.Timer.new(1,1,function()
		self.triggerGuideData, self.functionArr = qy.tank.utils.Config2ArrUtil.getArrByTriggerGuideConfig(qy.Config.trigger_guide)
	end)
	timer:start()
end

function GuideModel:getTriggerGuideData(_level)
	if self.triggerGuideData == nil or self.functionArr == nil then
		self.triggerGuideData, self.functionArr = qy.tank.utils.Config2ArrUtil.getArrByTriggerGuideConfig(qy.Config.trigger_guide)
	end
	--print("self.triggerGuideData======>>>>>>",qy.json.encode(self.triggerGuideData))
	if _level == nil then
		_level = self.userModel.userInfoEntity.level
	end
	print("///////////////////////////////////////////////////////////////")
	print("_level=====" .. _level)
	-- print(qy.json.encode(self.triggerGuideData))
	return self.triggerGuideData[_level]
end

function GuideModel:getOpenLevelByName(_name)
	if self.functionArr then
		return self.functionArr[_name]
	else
		return -1
	end
end

function GuideModel:getTriggerGuideStep()
	if self.lastTriggerStep == nil or self.lastTriggerStep == -1 then
		self.lastTriggerStep = 1
	end
	self.lastTriggerStep = self.lastTriggerStep + 1

	local data = self:getTriggerGuideData()
	if data and #data >= self.lastTriggerStep then
		print("触发引导：【第" .. self.lastTriggerStep .. "步】 " .. data[self.lastTriggerStep].des)
		return self.lastTriggerStep
	else
		print("本次触发引导完成！")
		self.lastTriggerStep = -1
		return -1
	end
end

function GuideModel:getTriggerGuideIcon()
	local data = self:getTriggerGuideData()[1]
	return data.res
end

function GuideModel:isNeedTriggerGuide()
	local data = self:getTriggerGuideData()
	print("guide data====>>>",qy.json.encode(data))
	if #data > 1 then
		return true
	else
		return false
	end
end

return GuideModel
